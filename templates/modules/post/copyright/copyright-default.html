<!-- ç‰ˆæƒæ ·å¼é»˜è®¤ -->
<th:block  th:if="${#strings.equals(theme.config.post.copyrightsStyle, 'default')}">
    <div class="post-tools" id="post-tools">
        <div class="post-tools-left">

            <!-- æ‰“èµ -->
            <div th:if="${theme.config.aboutReward.reward.enable_reward_wz}" class="post-reward"
                 onclick="AddRewardMask()">
                <div class="reward-button button&#45;&#45;animated" title="èµèµä½œè€…"><i class="haofont hao-icon-hand-heart-fill"></i>
                    æ‰“èµä½œè€…
                </div>
                <div class="reward-main">
                    <ul class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span>
                        <ul class="reward-group">
                            <!-- å¾®ä¿¡æ”¶æ¬¾ç  - åªæœ‰ä¸Šä¼ äº†æ‰æ˜¾ç¤º -->
                            <li class="reward-item" th:if="${not #strings.isEmpty(theme.config.aboutReward.reward.wxPay)}">
                                <a th:href="@{${theme.config.aboutReward.reward.wxPay}}" target="_blank">
                                    <img alt="å¾®ä¿¡" class="post-qr-code-img" th:src="${theme.config.aboutReward.reward.wxPay}">
                                </a>
                                <div class="post-qr-code-desc">å¾®ä¿¡</div>
                            </li>
                            <!-- æ”¯ä»˜å®æ”¶æ¬¾ç  - åªæœ‰ä¸Šä¼ äº†æ‰æ˜¾ç¤º -->
                            <li class="reward-item" th:if="${not #strings.isEmpty(theme.config.aboutReward.reward.alipay)}">
                                <a th:href="@{${theme.config.aboutReward.reward.alipay}}" target="_blank">
                                    <img alt="æ”¯ä»˜å®" class="post-qr-code-img" th:src="${theme.config.aboutReward.reward.alipay}">
                                </a>
                                <div class="post-qr-code-desc">æ”¯ä»˜å®</div>
                            </li>
                            <!-- æ•°å­—è´§å¸ - åªæœ‰ä¸Šä¼ äº†äºŒç»´ç ä¸”å¡«å†™äº†é’±åŒ…åœ°å€æ‰æ˜¾ç¤º -->
                            <li class="reward-item crypto-reward-post" 
                                th:if="${not #strings.isEmpty(theme.config.aboutReward.reward.cryptoQrCode) and not #strings.isEmpty(theme.config.aboutReward.reward.cryptoAddress)}">
                                <a th:href="@{${theme.config.aboutReward.reward.cryptoQrCode}}" target="_blank">
                                    <img alt="æ•°å­—è´§å¸" class="post-qr-code-img" th:src="${theme.config.aboutReward.reward.cryptoQrCode}">
                                </a>
                                <div class="post-qr-code-desc">[[${theme.config.aboutReward.reward.cryptoNetwork}]]</div>
                                <div class="crypto-address-post-wrapper">
                                    <input type="text" class="crypto-address-post-input" readonly 
                                           th:value="${theme.config.aboutReward.reward.cryptoAddress}">
                                    <button class="crypto-copy-post-btn" onclick="copyWalletAddressPost(this)" title="å¤åˆ¶é’±åŒ…åœ°å€">
                                        <i class="haofont hao-icon-copy"></i>
                                    </button>
                                </div>
                            </li>
                        </ul>
                        <a class="reward-main-btn" th:href="@{${theme.config.aboutReward.reward.reward_md_url}}"
                           target="_blank">
                            <div class="reward-text">èµèµè€…åå•</div>
                            <div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div>
                        </a>
                    </ul>
                </div>
            </div>

            <!-- è¯´æ˜ -->
            <div th:if="${theme.config.post.post_edit.enable_post_edit}" class="reward-link mode"><a
                    class="reward-link-button" th:href="@{${theme.config.post.post_edit.post_edit_url}}">
                <i class="haofont hao-icon-plant-fill"></i>è¿è¥æ¨¡å¼ä¸è´£ä»»</a>
            </div>

            <!-- åˆ†äº« -->
            <div class="share-link mobile" th:if="${theme.config.post.share_right.mobile_edit}">
                <div class="share-qrcode">
                    <div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="haofont hao-icon-qrcode"></i>
                    </div>
                    <div class="share-main">
                        <div class="share-main-all">
                            <div id="qrcode"></div>
                            <div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="share-link weibo" th:if="${theme.config.post.share_right.weibo_edit}">
                <a class="share-button" rel="noopener external nofollow noreferrer noopener" target="_blank"
                   th:href="'https://service.weibo.com/share/share.php?title=' + ${post.spec.title}" title="åˆ†äº«åˆ°å¾®åš">
                    <i class="haofont hao-icon-weibo" style="font-size:22px"></i></a>
            </div>
            <div class="share-link copyurl" th:if="${theme.config.post.share_right.copyurl_edit}">
                <div class="share-button" id="post-share-url" onclick="rm.copyPageUrl()" title="å¤åˆ¶é“¾æ¥"><i
                        class="haofont hao-icon-link"></i></div>
            </div>
        </div>
        <div class="post-tools-right">
            <div class="tag_share">
                <div class="post-meta__tag-list">
                    <a class="post-meta__tags" th:each="tag : ${post.tags}" th:href="@{${tag.status.permalink}}">
                        <span class="tags-punctuation">[[${tag.spec.displayName}]]</span>

                        <span class="tagsPageCount" th:text="${tag.status.visiblePostCount}"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ç‰ˆæƒå£°æ˜ -->
    <div class="post-copyright" th:with="copyrightUrl =${#annotations.get(post, 'copyrightUrl')},
       copyrightEnable = ${not #strings.isEmpty(#annotations.get(post, 'copyrightEnable')) ?
       #annotations.get(post, 'copyrightEnable') == 'true' : theme.config.post.copyrights.enable}">
        <div class="post-copyright__author" >
            <!-- ç‰ˆæƒé¡µ ä»¥åŠç‰ˆæƒæè¿°æ–‡å­— -->
            <a th:if="${#strings.equals(#annotations.getOrDefault(post, 'copyrightType','original'),'original') && copyrightEnable}"
               class="post-copyright__original" th:href="@{${not #strings.isEmpty(copyrightUrl) ? copyrightUrl :
                not #strings.isEmpty(theme.config.post.copyrights.originalUrl) ? theme.config.post.copyrights.originalUrl : '#'}}"
               title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a>
            <a th:if="${#strings.equals(#annotations.getOrDefault(post, 'copyrightType','original'),'reprint') && copyrightEnable}"
               class="post-copyright__original" th:href="@{${not #strings.isEmpty(copyrightUrl) ? copyrightUrl :
                not #strings.isEmpty(theme.config.post.copyrights.originalUrl) ? theme.config.post.copyrights.reprintUrl : '#'}}"
               title="è¯¥æ–‡ç« ä¸ºè½¬è½½æ–‡ç« ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰">è½¬è½½</a>
            <a class="post-copyright-title" href="#"><span th:text="${post.spec.title}"></span></a>
        </div>
        <div class="post-copyright__type">
            <span class="post-copyright-info" id="post-copyright-url">
                <a href="javascript:window.location.href;">[[${post.spec.title}]]</a>
            </span>
            <button class="post-copyright-copybtn" onclick="rm.copyPageUrl()">
                <i class="haofont hao-icon-paste"></i>
            </button>
        </div>
        <div class="post-copyright__notice" th:if="${copyrightEnable}">
            <span class="post-copyright-info"
                  th:utext="${#strings.equals(#annotations.getOrDefault(post, 'copyrightType','original'),'reprint') ?
                         theme.config.post.copyrights.reprintContent : theme.config.post.copyrights.content}">
            </span>
        </div>
    </div>

    <link rel="stylesheet" th:href="${assets_link + '/css/post-copyright.css' + theme_version}">
    <!-- æ•°å­—è´§å¸æ‰“èµæ ·å¼å’Œè„šæœ¬ -->
    <th:block th:if="${not #strings.isEmpty(theme.config.aboutReward.reward.cryptoQrCode) and not #strings.isEmpty(theme.config.aboutReward.reward.cryptoAddress)}">
    <style>
        .crypto-reward-post { min-width: 180px; text-align: center; }
        .crypto-reward-post .post-qr-code-desc { text-align: center; }
        .crypto-address-post-wrapper {
            justify-content: center;
            display: flex;
            align-items: center;
            margin-top: 8px;
            padding: 0 6px;
            gap: 4px;
        }
        .crypto-address-post-input {
            flex: 1;
            padding: 5px 8px;
            font-size: 10px;
            font-family: 'Monaco', 'Consolas', monospace;
            border: 1px solid var(--heo-card-border);
            border-radius: 5px;
            background: var(--heo-card-bg);
            color: var(--heo-fontcolor);
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
            width: 100px;
        }
        .crypto-copy-post-btn {
            flex-shrink: 0;
            padding: 5px 8px;
            border: none;
            border-radius: 5px;
            background: var(--heo-main);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .crypto-copy-post-btn:hover {
            opacity: 0.85;
            transform: scale(1.05);
        }
        .crypto-copy-post-btn:active {
            transform: scale(0.95);
        }
        .crypto-copy-post-btn i { font-size: 12px; }
    </style>
    <script>
        function copyWalletAddressPost(btn) {
            const input = btn.previousElementSibling;
            input.select();
            input.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(input.value).then(function() {
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="haofont hao-icon-circle-check"></i>';
                btn.style.color = '#52c41a';
                setTimeout(function() {
                    btn.innerHTML = originalHTML;
                    btn.style.color = '';
                }, 2000);
            }).catch(function() {
                document.execCommand('copy');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="haofont hao-icon-circle-check"></i>';
                btn.style.color = '#52c41a';
                setTimeout(function() {
                    btn.innerHTML = originalHTML;
                    btn.style.color = '';
                }, 2000);
            });
        }
    </script>
    </th:block>
</th:block>
